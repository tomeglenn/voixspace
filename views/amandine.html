{% extends "layout.html" %}

{% block head %}

<style>
  body {
    font-family: Monospace;
    background-color: #f0f0f0;
    margin: 0px;
    overflow: hidden;
  }
</style>
  <script src="/public/js/TrackballControls.js"></script>
  <script src="/public/js/Detector.js"></script>

  <script>
    
    window.onload = function () {

      var mouseX = 0;
      var mouseY = 0;
      var windowHalfX = window.innerWidth / 2;
      var windowHalfY = window.innerHeight / 2;
      var radius = 100, theta = 0;
      var angle = 0;
      
      // SCENE
      var scene = new THREE.Scene();
      scene.background = new THREE.Color( 0x0F6A7A );
      scene.add( new THREE.AmbientLight( 0xffffff, 0.3 ) );

      // LIGHT
      var light = new THREE.DirectionalLight( 0xffffff, 0.35 );
      light.position.set( 1, 1, 1 ).normalize();
      scene.add( light );

      // CAMERA
      var camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 1000 );
      camera.position.x = 0;
      camera.position.z = -5;

      // CONTROLS FOR CAMERA DRAG
      var controls = new THREE.TrackballControls(camera);
      controls.rotateSpeed = 10.0;
      controls.zoomSpeed = 10;
      controls.noZoom = false;
      controls.noPan = true;
      controls.staticMoving = true;
      controls.dynamicDampingFactor = 1;
      controls.keys = [ 65, 83, 68 ];
      controls.addEventListener( 'change', render );

      // RENDERER
      var renderer = new THREE.WebGLRenderer();
      renderer.setSize( window.innerWidth, window.innerHeight );
      document.body.appendChild( renderer.domElement );

      // GEOMETRY
      var shapes = [];
      var geometry = new THREE.SphereBufferGeometry( 0.1, 32, 16 ); //new THREE.BoxGeometry( 1, 1, 1 );
      var material = new THREE.MeshBasicMaterial( { color: 0x32A188, wireframe: true } );
      
      for(var i=0; i<1000; i++){
        var cube = new THREE.Mesh( geometry, material );
        cube.position.x = Math.random() * 360 - 180;
        cube.position.y = Math.random() * 360 - 180;
        cube.position.z = Math.random() * 360 - 180;
        cube.scale.x = cube.scale.y = cube.scale.z = Math.random() * 3 + 1;

        scene.add( cube );
        shapes[i] = cube;
      }   

      function render() {
        
        // SHAPES ANIMATION
        // for(var i=0; i<shapes.length; i++){
        //   shapes[i].rotation.x = Math.random() * 5;
        //   shapes[i].rotation.y = Math.random() * 5;
        // }
      
        // CAMERA FOLLOWS MOUSE
        // requestAnimationFrame( render );
        // camera.position.x += ( mouseX - camera.position.x ) * .05;
				// camera.position.y += ( - mouseY - camera.position.y ) * .05;
				// camera.lookAt( scene.position );

        // CAMERA ZOOM IN OUT
        // var timer = Date.now() * 0.0001;
				// camera.position.x = Math.cos( timer ) * 200;
				// camera.position.z = Math.sin( timer ) * 200;
				// camera.lookAt( scene.position );
        
      	renderer.render( scene, camera );
      }

      // CAMERA FOLLOWS MOUSE
      // function onDocumentMouseMove(event) {        
			//   mouseX = ( event.clientX - windowHalfX ) / 100;
			// 	mouseY = ( event.clientY - windowHalfY ) / 100;
			// }
      // document.addEventListener( 'mousemove', onDocumentMouseMove, false );

      function animate() {
        // ALLOW CAMERA DRAG
        requestAnimationFrame( animate );
        controls.update();

        theta += 0.01;
				camera.position.x = radius * Math.sin( THREE.Math.degToRad( theta ) );
				camera.position.y = radius * Math.sin( THREE.Math.degToRad( theta ) );
				camera.position.z = radius * Math.cos( THREE.Math.degToRad( theta ) );
      }

      // WINDOW RESIZE
      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize( window.innerWidth, window.innerHeight );
        controls.handleResize();
        render();
			}
      window.addEventListener( 'resize', onWindowResize, false );      

      render();
      animate();
    };
  </script>
{% endblock %}
{% block body %}
{% endblock %}
